{
  "anonymous": false,
  "attributes": [
    {
      "name": "Allow Print",
      "values": [
        "True"
      ]
    },
    {
      "name": "Owning Team",
      "values": [
        "Default"
      ]
    }
  ],
  "bridgedResources": [
    {
      "model": "Datastore - Work Info",
      "name": "Work Order Records",
      "order": [

      ],
      "parameters": [
        {
          "mapping": "${values('Originating Id')}",
          "name": "Parent Submission Id"
        }
      ],
      "qualification": "By Parent Submission Id",
      "status": "Active"
    }
  ],
  "categorizations": [

  ],
  "customHeadContent": "",
  "description": "Submissions for this form are automatically created as part of workflow.",
  "indexDefinitions": [
    {
      "name": "closedBy",
      "parts": [
        "closedBy"
      ],
      "unique": false
    },
    {
      "name": "createdBy",
      "parts": [
        "createdBy"
      ],
      "unique": false
    },
    {
      "name": "handle",
      "parts": [
        "handle"
      ],
      "unique": false
    },
    {
      "name": "submittedBy",
      "parts": [
        "submittedBy"
      ],
      "unique": false
    },
    {
      "name": "updatedBy",
      "parts": [
        "updatedBy"
      ],
      "unique": false
    },
    {
      "name": "values[Reference 1]",
      "parts": [
        "values[Reference 1]"
      ],
      "unique": false
    },
    {
      "name": "values[Service Provider Reference]",
      "parts": [
        "values[Service Provider Reference]"
      ],
      "unique": false
    }
  ],
  "integrations": [

  ],
  "name": "Hanford Work Order Test",
  "notes": null,
  "pages": [
    {
      "advanceCondition": "values('Status') === 'Complete' || values('Status') === 'Cancelled'",
      "displayCondition": null,
      "displayPage": null,
      "elements": [
        {
          "type": "section",
          "renderType": null,
          "name": "Work Info Section",
          "title": "Work Info",
          "visible": true,
          "omitWhenHidden": null,
          "renderAttributes": {
          },
          "elements": [
            {
              "type": "content",
              "renderType": "html",
              "name": "Work Info Table Container",
              "text": null,
              "visible": true,
              "renderAttributes": {
              }
            },
            {
              "type": "content",
              "renderType": "html",
              "name": "Work Info Container",
              "text": null,
              "visible": true,
              "renderAttributes": {
                "id": "workInfo"
              }
            }
          ]
        },
        {
          "type": "section",
          "renderType": null,
          "name": "Reference Section",
          "title": "",
          "visible": true,
          "omitWhenHidden": null,
          "renderAttributes": {
          },
          "elements": [
            {
              "type": "field",
              "name": "Reference 1",
              "label": "Reference 1",
              "key": "f49",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": false,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": true,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Service Provider Reference",
              "label": "Service Provider Reference",
              "key": "f50",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            }
          ]
        },
        {
          "type": "section",
          "renderType": null,
          "name": "Form",
          "title": null,
          "visible": true,
          "omitWhenHidden": null,
          "renderAttributes": {
          },
          "elements": [
            {
              "type": "section",
              "renderType": null,
              "name": "Status Fields",
              "title": null,
              "visible": true,
              "omitWhenHidden": null,
              "renderAttributes": {
              },
              "elements": [
                {
                  "type": "field",
                  "name": "Status",
                  "label": "Status",
                  "key": "f10",
                  "defaultValue": "Open",
                  "defaultResourceName": null,
                  "visible": true,
                  "enabled": true,
                  "required": true,
                  "requiredMessage": "A valid status must be set.",
                  "omitWhenHidden": null,
                  "pattern": null,
                  "constraints": [

                  ],
                  "events": [

                  ],
                  "renderAttributes": {
                  },
                  "dataType": "string",
                  "renderType": "radio",
                  "choicesResourceName": null,
                  "choicesRunIf": null,
                  "choices": [
                    {
                      "label": "Open",
                      "value": "Open"
                    },
                    {
                      "label": "Pending",
                      "value": "Pending"
                    },
                    {
                      "label": "Complete",
                      "value": "Complete"
                    },
                    {
                      "label": "Cancelled",
                      "value": "Cancelled"
                    }
                  ]
                },
                {
                  "type": "field",
                  "name": "Pending Reason",
                  "label": "Pending Reason",
                  "key": "f33",
                  "defaultValue": null,
                  "defaultResourceName": null,
                  "visible": "values('Status') === 'Pending'",
                  "enabled": true,
                  "required": "values('Status') === 'Pending'",
                  "requiredMessage": "Pending Reason is required when status is set to Pending",
                  "omitWhenHidden": true,
                  "pattern": null,
                  "constraints": [

                  ],
                  "events": [

                  ],
                  "renderAttributes": {
                  },
                  "dataType": "string",
                  "renderType": "text",
                  "rows": 1
                },
                {
                  "type": "field",
                  "name": "Resolution",
                  "label": "Resolution",
                  "key": "f34",
                  "defaultValue": null,
                  "defaultResourceName": null,
                  "visible": "values('Status') === 'Complete'",
                  "enabled": true,
                  "required": "values('Status') === 'Complete'",
                  "requiredMessage": "Resolution is required when status is set to Complete",
                  "omitWhenHidden": true,
                  "pattern": null,
                  "constraints": [

                  ],
                  "events": [

                  ],
                  "renderAttributes": {
                  },
                  "dataType": "string",
                  "renderType": "text",
                  "rows": 1
                },
                {
                  "type": "field",
                  "name": "Cancellation Reason",
                  "label": "Cancellation Reason",
                  "key": "f35",
                  "defaultValue": null,
                  "defaultResourceName": null,
                  "visible": "values('Status') === 'Cancelled'",
                  "enabled": true,
                  "required": "values('Status') === 'Cancelled'",
                  "requiredMessage": "Cancellation Reason is required when status is set to Cancelled",
                  "omitWhenHidden": true,
                  "pattern": null,
                  "constraints": [

                  ],
                  "events": [

                  ],
                  "renderAttributes": {
                  },
                  "dataType": "string",
                  "renderType": "text",
                  "rows": 1
                }
              ]
            },
            {
              "type": "field",
              "name": "Notes for Customer",
              "label": "Notes (sent to requester upon completion)",
              "key": "f47",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 3
            }
          ]
        },
        {
          "type": "section",
          "renderType": null,
          "name": "Hidden Metadata",
          "title": "",
          "visible": false,
          "omitWhenHidden": false,
          "renderAttributes": {
          },
          "elements": [
            {
              "type": "field",
              "name": "Assigned Individual",
              "label": "Assigned Individual",
              "key": "f1",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Assigned Individual Display Name",
              "label": "Assigned Individual Display Name",
              "key": "f2",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Assigned Team",
              "label": "Assigned Team",
              "key": "f3",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": true,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Assigned Team Display Name",
              "label": "Assigned Team Display Name",
              "key": "f4",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Deferral Token",
              "label": "Deferral Token",
              "key": "f5",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Details",
              "label": "Details",
              "key": "f23",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 2
            },
            {
              "type": "field",
              "name": "Discussion Id",
              "label": "Discussion Id",
              "key": "f6",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Due Date",
              "label": "Due Date",
              "key": "f22",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "datetime"
            },
            {
              "type": "field",
              "name": "Observing Individuals",
              "label": "Observing Individuals",
              "key": "f7",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "json",
              "renderType": "checkbox",
              "choicesResourceName": null,
              "choicesRunIf": null,
              "choices": [

              ]
            },
            {
              "type": "field",
              "name": "Observing Teams",
              "label": "Observing Teams",
              "key": "f8",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "json",
              "renderType": "checkbox",
              "choicesResourceName": null,
              "choicesRunIf": null,
              "choices": [

              ]
            },
            {
              "type": "field",
              "name": "Originating Id",
              "label": "Originating Id",
              "key": "f25",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Originating System",
              "label": "Originating System",
              "key": "f26",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Originating Url",
              "label": "Originating Url",
              "key": "f27",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "Scheduled Date",
              "label": "Scheduled Date",
              "key": "f48",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "datetime"
            },
            {
              "type": "field",
              "name": "Summary",
              "label": "Summary",
              "key": "f21",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            },
            {
              "type": "field",
              "name": "System Input",
              "label": "System Input",
              "key": "f24",
              "defaultValue": null,
              "defaultResourceName": null,
              "visible": true,
              "enabled": true,
              "required": false,
              "requiredMessage": null,
              "omitWhenHidden": null,
              "pattern": null,
              "constraints": [

              ],
              "events": [

              ],
              "renderAttributes": {
              },
              "dataType": "string",
              "renderType": "text",
              "rows": 1
            }
          ]
        }
      ],
      "events": [
        {
          "name": "Load Work Info",
          "type": "Load",
          "action": "Custom",
          "code": "// ***** CONFIGURE *********\nvar load = {\n\t//Form to Load\n  \"formSlug\":\"work-info\", \n  //Container for the form (jQuery syntax)\n  \"container\": '#workInfo', \n  //Define values to pass into subform.  Map subform Field to value or K('field') reference.\n\t//NOTE: INCLUDE THESE FIELDS IN SUBFORM, OR PAGE WILL NOT LOAD\n  \"paramsInput\": {\n    \"Parent Submission Id\" : K('field[Originating Id]').value(),\n    //\"Review Mode\" : K('form').reviewMode() ? true : \"\",\n\t},\n  //Define Fields to set on parent form using watch.  Map subform field to parent form field.\n  \"watchFields\":{\n  }\n}\n// ***** END CONFIGURE *********\n\n// Turn paramsInput into formatted/encoded urlParams array as that's what's required by the\n// Kinetic App when passing in values\nload.urlParams = [];\n$.each( load.paramsInput, function( key, value ){\n  load.urlParams.push( \"values[\" + encodeURIComponent( key ) + \"]=\" + encodeURIComponent( value ) );\n})\n\n\n// Remove null values from urlParams list\nload.urlParams = load.urlParams.filter(function(val) { return val.split(\"=\")[1]!==\"null\" });\n\n// Load the Subform\nK.load({\n  path: bundle.spaceLocation() + '/app/datastore/forms/'+ load.formSlug + '?' + load.urlParams.join(\"&\"),\n  container: load.container,\n  tag: 'child',\n  parent: K('form'),\n  loaded: function(form) {\n    window.child = form;\n\t\t// initialize watch fields definfed in configuration\n\t\t$.each(load.watchFields, function(source, desination){\n\t\t  form.$watch(source, function(newVal,oldVal){\n        K('field['+desination+']').value(newVal);\n      });\n    })\n  },\n  completed: function(data, actions) {\n    actions.close();\n\t\tK('form').page().trigger('load');\n  }\n});\n"
        },
        {
          "name": "Initialize Work Info Table",
          "type": "Load",
          "action": "Custom",
          "code": "searchConfig = typeof searchConfig===\"object\"? searchConfig : {};\nsearchConfig ={\n  // Example of full configuration of a search object to return results as a DataTable\n  relatedWorkInfo:{\n    resultsContainer: '<table cellspacing=\"0\", border=\"0\", class=\"display\", style=\"width: 100%;\">',\n\t\tdata: [\n      { \n        title:\"Create Date\",\n        name:\"Create Date\",\n        className: \"control\",\n        render: function( data, type, full, meta ){\n        \t\n          if (type === 'display') {\n            var date = moment(data.trim());\n        \t  var dateComponent = date.utc().format('YYYY-MM-DD HH:mm');\n            return dateComponent;\n          }\n          return data;\n        }\n      },\n      { \n        title:\"Notes\",\n        name:\"Notes\",\n        className: \"control\"\n      },\n      { \n        title:\"Attachments\",\n        name:\"Attachments\",\n        className: \"control\",\n        render: function ( data, type, full, meta ) {\n          if (type === 'display') {\n            value = \"\"\n            attachments = JSON.parse(data)\n            $.each(attachments, function(){\n              link = this.link.replace(\"/\"+K('space').slug(),\"\")\n              value += '<a href=\"' + link + '\" download=' + link + '>'+this.name+'</a></br>'\n            })\n            return value;\n          }\n          return data;\n        }\n      }\n    ],\n    resultsContainerId: 'work-info-results',\n    before: function(configObj){ \n    },\n    success: function (configObj){\n    },\n    successEmpty: function(configObj){\n      // Render the table even if the results are empty. (ie: on page load)\n      configObj.renderer.type(configObj.destination, configObj);\n    },\n    error: function(configObj){\n    },\n    complete: function(configObj){\n    },\n    // Executes on click of element with class of select\n    clickCallback: function(element, results){\n    },\n    removeOnClick: false,\n    renderer: {\n        //type: DataViewer.Renderers.DataTables, \n        type: DataViewer.Renderers.UnorderedList,\n      options: {\n          // Options for Renderer\n          processSingleResult: false,\n          // DataTable OPTIONS; Passing options here make it clear that they are being passed to data tables\n          // responsive: OPTIONAL Default for \"BridgeDataTable\" is true but can be over written.\n          responsive: false,\n          //autoWidth: false,\n          dom: 'rtip',\n          pageLength: 15,\n          paging: false,\n          //jsonQuestionField: '', //Define where the JSON Date for the Table is stored\n        },\n    },       \n  },\n}\n\n// Set the response object to the bridge response if it has values\nsearchConfig.relatedWorkInfo.response = typeof resource == \"object\" && resource.length > 0 ? resource : [];\n\n// Load the Table with the values.\nDataViewer.renderResults( $(K('content[Work Info Table Container]').element()), searchConfig.relatedWorkInfo );\n\n",
          "bridgedResourceName": "Work Order Records",
          "runIf": "false"
        },
        {
          "name": "Initialize Work Info",
          "type": "Load",
          "action": "Custom",
          "code": "$(K('content[Work Info Table Container]').element()).empty().append(\n\t$('<div>', { class: 'cards' }).append(\n    (Array.isArray(resource) ? resource : []).map(function(record) {\n    \treturn $('<div>', { class: 'card card--unstyled' }).append(\n      \t$('<div>', { class: 'card__col' }).append(\n        \t$('<div>', { class: 'card__row' }).text(record['Notes']),\n          $('<div>', { class: 'card__col' }).append(\n          \tJSON.parse(record['Attachments']).map(function(a) {\n              return $('<a>', {\n                download: true, \n                href: a.link.replace('/'+bundle.spaceSlug(), bundle.spaceLocation())\n              }).text(a.name);\n            })\n          ),\n          $('<div>', { class: 'card__row card__row--meta text-muted' }).append(\n          \t$('<dl>', { class: 'inline' }).append($('<div>').append(\n              $('<dt>').text('Created'),\n              $('<dd>').text(moment(record['Create Date']).fromNow())             \n            ))\n          )\n        )\n      );\n    })\n  )\n);\n\n",
          "bridgedResourceName": "Work Order Records"
        }
      ],
      "name": "Page One",
      "renderType": "submittable",
      "type": "page"
    }
  ],
  "securityPolicies": [

  ],
  "slug": "hanford-work-order-test",
  "status": "Active",
  "submissionLabelExpression": "${values('Summary')}",
  "type": "Automated"
}